apply plugin: 'maven-publish'

archivesBaseName = "server-translations-api"

repositories {
  mavenLocal()
  maven { url = 'https://maven.gegy.dev/' }
}

dependencies {
  modImplementation 'xyz.nucleoid:packet-tweaker:0.1.1'
  include 'xyz.nucleoid:packet-tweaker:0.1.1'
}

publishing {
  publications {
    mavenJava(MavenPublication) {
      artifactId = 'server-translations-api'
      artifact(remapJar) {
        builtBy remapJar
      }
      artifact(sourcesJar) {
        builtBy remapSourcesJar
      }
    }
  }

  repositories {
    if (project.hasProperty("mavenUrl")) {
      maven {
        credentials {
          username project.mavenUsername ?: ""
          password project.mavenPassword ?: ""
        }
        url project.mavenUrl ?: ""
      }
    } else {
      mavenLocal()
    }
  }
}
